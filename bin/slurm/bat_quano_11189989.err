Building DAG of jobs...
Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 10
Rules claiming more threads will be scaled down.
Job stats:
job                      count    min threads    max threads
---------------------  -------  -------------  -------------
all                          1              1              1
decompress_references        1              2              2
get_host_references          1              5              5
total                        3              1              5

Select jobs to execute...

[Wed Oct  9 16:27:32 2024]
rule get_host_references:
    input: /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/bat_host_accessions.txt
    output: /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/bat_references.zip
    log: /projects/raw_lab/projects/Bats/bat_gut_micro/workflow/logs/bat_host_accessions.log
    jobid: 11
    threads: 5
    resources: tmpdir=/tmp

Activating conda environment: /projects/raw_lab/projects/Bats/bat_gut_micro/workflow/.snakemake/conda/9ee16c57880082178b9cfe87ed28a861
[Wed Oct  9 16:29:09 2024]
Finished job 11.
1 of 3 steps (33%) done
Select jobs to execute...

[Wed Oct  9 16:29:09 2024]
rule decompress_references:
    input: /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/bat_references.zip
    output: /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/ncbi_dataset/data/GCA_036768555.1/GCA_036768555.1.fna, /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/ncbi_dataset/data/GCA_036768555.1/GCA_036768555.1.fna, /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/ncbi_dataset/data/GCA_028538775.1/GCA_028538775.1.fna, /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/ncbi_dataset/data/GCA_028538775.1/GCA_028538775.1.fna, /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/ncbi_dataset/data/GCA_004126475.3/GCA_004126475.3.fna, /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/ncbi_dataset/data/GCA_004126475.3/GCA_004126475.3.fna, /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/ncbi_dataset/data/GCA_004126475.3/GCA_004126475.3.fna, /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/ncbi_dataset/data/GCA_004126475.3/GCA_004126475.3.fna, /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/ncbi_dataset/data/GCA_019186645.2/GCA_019186645.2.fna
    jobid: 10
    threads: 2
    resources: tmpdir=/tmp

/usr/bin/bash: -c: line 8: syntax error near unexpected token `newline'
[Wed Oct  9 16:29:10 2024]
Error in rule decompress_references:
    jobid: 10
    output: /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/ncbi_dataset/data/GCA_036768555.1/GCA_036768555.1.fna, /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/ncbi_dataset/data/GCA_036768555.1/GCA_036768555.1.fna, /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/ncbi_dataset/data/GCA_028538775.1/GCA_028538775.1.fna, /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/ncbi_dataset/data/GCA_028538775.1/GCA_028538775.1.fna, /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/ncbi_dataset/data/GCA_004126475.3/GCA_004126475.3.fna, /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/ncbi_dataset/data/GCA_004126475.3/GCA_004126475.3.fna, /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/ncbi_dataset/data/GCA_004126475.3/GCA_004126475.3.fna, /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/ncbi_dataset/data/GCA_004126475.3/GCA_004126475.3.fna, /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/ncbi_dataset/data/GCA_019186645.2/GCA_019186645.2.fna
    shell:
        
            (cd /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/
            unzip /projects/raw_lab/projects/Bats/bat_gut_micro/data/references/bat_references.zip 
            find ./ -type f -name "GCA_*.fna" | while read file; do
                dir=$(dirname "$file")  # Get the directory of the file
                base=$(basename "$file")  # Get the file name
                newname=$(echo "$base" | cut -d'_' -f1-2).fna  # Extract the desired part of the file name
                mv "$file" "$dir/$newname"  # Rename the file
            done)2>
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /projects/raw_lab/projects/Bats/bat_gut_micro/workflow/.snakemake/log/2024-10-09T162731.530971.snakemake.log
